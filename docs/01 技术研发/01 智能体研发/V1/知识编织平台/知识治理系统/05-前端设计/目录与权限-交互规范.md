# 前端交互规范：目录树与权限面板

## 目录树
- 选择/展开：使用 `data-testid="directory-node-{id}"` 标注节点；展开折叠有显式图标。
- 排序与移动：拖拽后更新排序；前端调用 `PUT /directories/{id}/sort`（或批量接口）并显示进度与结果。
- 路径链显示：从根到当前的面包屑，`data-testid="breadcrumb"`。

## 权限面板
- 权限查看：调用 `GET /directories/{id}/permissions`，显示继承来源与覆盖状态。
- 覆盖编辑：调用 `PUT /directories/{id}/permissions`，带幂等键与变更摘要。
- 模板应用：调用 `POST /permissions/templates/apply`，支持范围选择与预览。
- 冲突提示：显示冲突详情与建议解决方案；`data-testid="permission-conflict"`。

## 状态与错误
- 统一错误提示：语义化错误码映射到可读文案；可重试操作提供按钮。
- 进度反馈：批量操作显示百分比与剩余时间估计。
- 空态与占位：无权限规则时显示模板建议卡片。